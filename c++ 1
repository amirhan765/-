#include <stdio.h>
#include <stdlib.h>

int 
main (int ac, char *av[])
{
  char upc['Z' - 'A' + 2], // тут будет результат
    *src = av[1] ? av[1] 
                   : (char *)"AaBbcD...XyZ."; // исходная строка по умолчанию
  unsigned int set = 0,    // временное множество, будет уничтожено при производстве результата
               i,          // индекс для перебора множества
               j;          // индекс свободного места в результате (upc[])

  for (; *src; src++)
    if (*src >= 'A' && *src <= 'Z')
      set |= (1 << (*src - 'A'));  // это заглавная буква, добавим ее в наше множество

  for (i = j = 0; set; i++, set >>= 1) // перебираем множество бит за битом, пока в нем еще что-то есть
    if (set & 1)
      upc[j++] = i + 'A'; // добавим очередную заглавную букву в результат
  upc[j] = 0;

  return puts(upc) == EOF;
}
